<!DOCTYPE html>
<html lang="ru" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Комментарии</title>
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="script.js" defer></script>
 
    <!-- Загрузим React. -->
    <!-- Примечание: для деплоя на продакшен замените окончание «development.js» на «production.min.js». -->
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Don't use this in production:--> 
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>

  </head>
  <body>
    <header class="container header-container">
      <div class="banner-top-container"></div>      
      <nav class="menu-nav menu-header_nav">
        <ul class="menu menu-header">
          <li class="menu-header_item">Главная</li>
          <li class="menu-header_item">Каталог</li>
          <li class="menu-header_item">Акции</li>
          <li class="menu-header_item">Форум</li>
          <li class="menu-header_item">Контакты</li>
          <li class="menu-header_item">О нас</li>
        </ul>
        <input class="search-text" type="text" placeholder="Поиск..." name="">
        <button class="btn search-btn"><i class="fa fa-search"></i> Найти</button>
      </nav>
    </header>
    <main class="container main-container">
        <section id="col-left">
          <h3 class="col-title">Другие темы</h3>
        </section>
        <section id="col-center">
            

                      
        </section>
        <section id="col-right"></section>
    </main>
    <footer id="footer">
      <section class="container footer-container">
        <nav class="menu-nav menu-footer_nav">
          <ul class="menu menu-footer">
            <li class="menu-footer_item">Главная</li>
            <li class="menu-footer_item">Каталог</li>
            <li class="menu-footer_item">Акции</li>
            <li class="menu-footer_item">Форум</li>
            <li class="menu-footer_item">Контакты</li>
            <li class="menu-footer_item">О нас</li>
          </ul>
        </nav>
        <div id="social">
          <h4>Наши соцсети</h4>
          <div>
            <a href="#" target="_blank" id="vk-logo">
              <i class="fa fa-vk"></i>
            </a>
            <a href="#" target="_blank" id="fb-logo">
              <i class="fa fa-facebook"></i>
            </a>
            <a href="#" target="_blank" id="tw-logo">
              <i class="fa fa-twitter"></i>
            </a>
            <a href="#" target="_blank" id="ig-logo">
              <i class="fa fa-instagram"></i>
            </a>
          </div>
        </div>
        <div id="contacts">
          <h4>Наши контакты</h4>
          <address><i class="fa fa-phone"></i> +7(812) 555-55-55</address>
          <address><i class="fa fa-envelope"></i> aaa@info.ru</address>
        </div>
      </section>
    </footer>    

    <script type="text/babel">
      const CommentItem = (props) => {
        return (
          <div className="comment">
          <div className="comment-title">
            <h4 className="comment-name">{props.name}</h4>
            <div className="comment-time">{props.time}</div>
          </div>
          <p className="comment-text">{props.text}</p>
        </div>
        );        
      }

      class CommentsApp extends React.Component {
        constructor(){
          super();

          if(!localStorage.getItem('usersComments')) {
            localStorage.setItem('usersComments', {});
          }

          this.state = localStorage.getItem('usersComments');
        }

        addComment() {
          const usersComments = this.state.usersComments;
          const commentTime = new Date();
          usersComments.push({
            name: this.state.newUserName,
            text: this.state.newText,
            time: commentTime.getHours() + ' ' + commentTime.getMinutes() + ' ' + commentTime.getSeconds() + ' ' + commentTime.getDate() + ' ' + commentTime.getMonth() + ' ' + commentTime.getFullYear();
          });
          this.setState({
            usersComments,
            newUserName: '',
            newText: ''
          });
          localStorage.setItem(usersComments);
        }

        render() {
          return (
          <div id="col-center-container">
            <h3 class="col-title">Текущая тема</h3>
            <div id="comments-container">
              {
                this.state.usersComments.map((comment, i) => {
                  return (
                    <CommentItem 
                      key={i}
                      name={comment.name}
                      text={comment.text}
                      time={comment.time}
                    />
                  );
                });
              }
            </div>
            <form id="form-comment">
              <label for="user-name">Ваше имя:</label>
              <input
                type="text"
                id="user-name"
                value={this.state.newUserName}
                onChange={ev=>{
                  this.setState({newUserName: ev.target.value});
                }}
                required />
              <label for="user-text">Ваш комментарий:</label>
              <textarea
                id="user-text"
                value={this.state.newText}
                onChange={ev=>{
                  this.setState({newText: ev.target.value});
                }}
                required>
              </textarea>
              <button
                class="btn comment-btn"
                onSubmit={ev=>{
                  addComment();                  
                }}
                >
                Отправить
              </button>
            </form>
          </div>      
        );
      }
    }
        

      ReactDOM.render(<CommentItem />, document.getElementById('comments-container'));

      
    </script>
  </body>
</html>